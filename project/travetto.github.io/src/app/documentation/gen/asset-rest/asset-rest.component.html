<div class="documentation"><h2 id="asset-rest" id="asset-rest">Asset-Rest</h2>
<app-section-header headerType="install">Rest support</app-section-header>
<pre><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> @travetto/asset-rest</code></pre><p>This module provides a clean and direct mechanism for processing uploads, built upon <a class="external-link" href="https://github.com/mscdex/busboy" target="_blank" null><code class="inline">busboy</code></a>.  The module also provides some best practices with respect to temporary file deletion.</p>
<p>Once the files are uploaded, they are exposed on <a class="module-link" routerLink="/docs/rest"  null><code class="inline">Rest</code></a>â€˜s request object as <code class="inline">req.files</code>. The uploaded files are constructed as <code class="inline">Asset</code> instances, which allows for integration with the <a class="module-link" routerLink="/docs/asset"  null><code class="inline">Asset</code></a> module.</p>
<p>A simple example:</p>
<app-section-header headerType="code">Rest controller with upload support</app-section-header>
<pre><code class="language-typescript">@<span class="token meta">Controller</span><span class="token punctuation">(</span><span class="token string">'/asset'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AssetController</span> <span class="token punctuation">{{ '{' }}</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span>
    <span class="token parameter"><span class="token keyword">private</span> assetService<span class="token operator">:</span> AssetService</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{{ '{' }}</span> <span class="token punctuation">{{ '}' }}</span>

  @<span class="token meta">Post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token parameter">@<span class="token meta">Upload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> file<span class="token operator">:</span> UploadAsset</span><span class="token punctuation">)</span> <span class="token punctuation">{{ '{' }}</span>
    <span class="token keyword">const</span> stored <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>assetService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{{ '{' }}</span>
      path<span class="token operator">:</span> stored<span class="token punctuation">.</span>path
    <span class="token punctuation">{{ '}' }}</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{ '}' }}</span>

  @<span class="token meta">Get</span><span class="token punctuation">(</span><span class="token string">'/:imgPath'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">getImage</span><span class="token punctuation">(</span><span class="token parameter">@<span class="token meta">Path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> imgPath<span class="token operator">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{{ '{' }}</span>
    <span class="token keyword">const</span> asset <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>assetService<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token type">AssetUtil</span><span class="token punctuation">.</span><span class="token function">downloadable</span><span class="token punctuation">(</span>asset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{ '}' }}</span>
<span class="token punctuation">{{ '}' }}</span></code></pre></div>