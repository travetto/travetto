<div class="documentation"><h2 id="jwt" id="jwt">JWT</h2>
<app-section-header headerType="install">Primary</app-section-header>
<pre><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> @travetto/jwt</code></pre><p>This module is a simple component to support <a class="external-link" href="https://jwt.io/" target="_blank" null><code class="inline">JWT</code></a> signing and verification.  The framework provides a port of <a class="external-link" href="https://github.com/auth0/node-jsonwebtoken" target="_blank" null><code class="inline">node-jsonwebtoken</code></a>. The API has been streamlined, and is intended as a lower level component as a basis for other modules.</p>
<p>The API exposes:</p>
<app-section-header headerType="code">Signing typings</app-section-header>
<pre><code class="language-typescript"><span class="token function">sign</span><span class="token punctuation">(</span>payload<span class="token punctuation">:</span>object<span class="token punctuation">,</span> config<span class="token punctuation">:</span><span class="token punctuation">{{ '{' }}</span>
  key<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token type">Buffer</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token type">Buffer</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// <span class="token type">Signing</span> Key</span>
  iatExclude<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// <span class="token type">Do</span> not return or set the issuedAt flag</span>
  alg<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// <span class="token type">Which</span>  encoding algorithm</span>
  header<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type">Record</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// <span class="token type">Any</span> additional header information</span>
  encoding<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// <span class="token type">Encoding</span>, defaults to utf8</span>
<span class="token punctuation">{{ '}' }}</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre><app-section-header headerType="code">Decode typings</app-section-header>
<pre><code class="language-typescript"><span class="token function">decode</span><span class="token punctuation">(</span>token<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token type">Payload</span><span class="token punctuation">;</span>

<span class="token function">decodeComplete</span><span class="token punctuation">(</span>token<span class="token punctuation">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">{{ '{' }}</span>
  header<span class="token punctuation">:</span> <span class="token punctuation">{{ '{' }}</span><span class="token punctuation">{{ '}' }}</span><span class="token punctuation">,</span>
  signature<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  payload<span class="token punctuation">:</span> <span class="token type">Payload</span>
<span class="token punctuation">{{ '}' }}</span></code></pre><app-section-header headerType="code">Verify typings</app-section-header>
<pre><code class="language-typescript"><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{{ '{' }}</span>
  clock<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{{ '{' }}</span>
    timestamp<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token type">Date</span><span class="token punctuation">,</span> <span class="token comment">// <span class="token type">Timestamp</span> as basis for expiry checks</span>
    tolerance<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span>  <span class="token comment">// <span class="token type">How</span> many seconds are you willing to tolerate</span>
  <span class="token punctuation">{{ '}' }}</span><span class="token punctuation">,</span>
  ignore<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{{ '{' }}</span>
    exp<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>  <span class="token comment">// <span class="token type">Ignore</span> expires</span>
    nbf<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span>   <span class="token comment">// <span class="token type">Ignore</span> not before</span>
  <span class="token punctuation">{{ '}' }}</span><span class="token punctuation">,</span>
  maxAgeSec<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token comment">// <span class="token type">Maximum</span> age of token in seconds</span>
  header<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type">Record</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token comment">// <span class="token type">Match</span> against specific header fields</span>
  key<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token type">Buffer</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token type">Buffer</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token comment">// <span class="token type">Use</span> the key for decoding token</span>
  encoding<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// <span class="token type">Defaults</span> to utf8</span>
  alg<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// <span class="token type">Algorithm</span> for decryption</span>
  payload<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{{ '{' }}</span>
    aud<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token type">RegExp</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token type">RegExp</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// <span class="token type">Match</span> the payload aud against a set of audiences</span>
    <span class="token operator">...</span> <span class="token comment">// <span class="token type">Match</span> against any payload value</span>
  <span class="token punctuation">{{ '}' }}</span>
<span class="token punctuation">{{ '}' }}</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span></code></pre></div>