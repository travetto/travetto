<!-- This file was generated by @travetto/doc and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/main/module/email/doc.ts and execute "npx trv doc" to rebuild -->
<div class="documentation">
<h1>Email
          <small>Email transmission module.</small>

        </h1>

      <figure class="install">
      <figcaption class="install">Install @travetto/email
      
      </figcaption>
      <pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @travetto/email</code></pre>     
      </figure>

A standard API for sending and rendering emails. The mail transport must be defined to allow for mail to be sent properly.  Out of the box, the only transport available by default is the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/main/module/email/src/transport.ts#L15">NullTransport</a> which will just drop emails. The structure of the API is derived from  <a target="_blank" class="external-link" href="https://nodemailer.com/about/">nodemailer</a>, but is compatible with any library that can handle the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/main/module/email/src/types.ts#L37">MessageOptions</a> input.

To expose the necessary email transport, the following pattern is commonly used:

      <figure class="code">
      <figcaption class="code">Declaring the null transport for development
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/email/doc/null.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> InjectableFactory <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/di'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> NullTransport <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/email'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{{'{'}}</span>
  @<span class="token meta">InjectableFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">static</span> <span class="token function">getTransport</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NullTransport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

Given the amorphous nature of transports, the <code class="item input">transport</code> field in <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/main/module/email/src/config.ts#L7">MailConfig</a> is open for any configuration that you may want there. Additionally, the templating engine is optional.  The code will only fail if you attempt to send a templated email without declaring the dependency first.

<h2 id="sending-compiled-templates">Sending Compiled Templates</h2>
By design, sending an email requires the sender to specify the html, text optionally, and subject.  To integrate with other tools, the framework also has the ability to send an email as a set of templates, based off a single key. The module will look for:
<ul> <li><code class="item input">resources/&lt;key&gt;.compiled.html</code></li>
 <li><code class="item input">resources/&lt;key&gt;.compiled.text</code></li>
 <li><code class="item input">resources/&lt;key&gt;.compiled.subject</code></li></ul>
With <code class="item input">.html</code> being the only required field.  The <a class="module-link" routerLink="/docs/email-template" title="Email templating module">Email Templating</a> module supports this format, and will generate files accordingly. Also, note that <code class="item input">&lt;key&gt;</code> can include slashes, allowing for nesting folders.

<h2 id="nodmailer-extension">Nodmailer - Extension</h2>

Given the integration with <a target="_blank" class="external-link" href="https://nodemailer.com/about/">nodemailer</a>, all extensions should be usable out of the box. The primary <a target="_blank" class="external-link" href="https://nodemailer.com/about/">nodemailer</a> modules are provided (assuming dependencies are installed):

      <figure class="code">
      <figcaption class="code">sendmail to send all messages via the sendmail operation
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/email/doc/sendmail.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> InjectableFactory <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/di'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> NodemailerTransport <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/email'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{{'{'}}</span>
  @<span class="token meta">InjectableFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">static</span> <span class="token function">getTransport</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NodemailerTransport</span><span class="token punctuation">(</span><span class="token punctuation">{{'{'}}</span> sendmail<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

      <figure class="code">
      <figcaption class="code">smtp to send all messages via the smtp operation
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/email/doc/smtp.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> InjectableFactory <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/di'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> NodemailerTransport <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/email'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{{'{'}}</span>
  @<span class="token meta">InjectableFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">static</span> <span class="token function">getTransport</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NodemailerTransport</span><span class="token punctuation">(</span><span class="token punctuation">{{'{'}}</span>
      service<span class="token operator">:</span> <span class="token string">'smtp'</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

      <figure class="code">
      <figcaption class="code">ses to send all messages via the ses operation
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/email/doc/ses.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> SESClient <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@aws-sdk/client-ses'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> InjectableFactory <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/di'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> NodemailerTransport <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/email'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{{'{'}}</span>
  @<span class="token meta">InjectableFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">static</span> <span class="token function">getTransport</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NodemailerTransport</span><span class="token punctuation">(</span><span class="token punctuation">{{'{'}}</span>
      <span class="token constant">SES</span><span class="token operator">:</span> SESClient
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>
</div>
