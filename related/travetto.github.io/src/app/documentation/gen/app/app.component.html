<!-- This file was generated by the framweork and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/master/module/app/doc.ts and execute "npm run docs" to rebuild -->
<div class="documentation">
<h1>Application
          <small>Application registration/management and run support.</small>

        </h1>

      <figure class="install">
      <figcaption class="install">Install @travetto/app
      
      </figcaption>
      <pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @travetto/app</code></pre>     
      </figure>

The <a class="module-link" href="https://github.com/travetto/travetto/tree/master/module/base" title="Application phase management, environment config and common utilities for travetto applications.">Base</a> module provides a simplistic entrypoint to allow for the application to run, but that is not sufficient for more complex applications. This module provides a decorator, <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/master/module/app/src/decorator.ts#L24">@Application</a> who's job is to register entry points into the application, along with the associated  metadata. 

With the application, the <code class="item method">run</code> method is the entry point that will be invoked post construction of the class. Building off of the <a class="module-link" href="https://github.com/travetto/travetto/tree/master/module/di" title="Dependency registration/management and injection support.">Dependency Injection</a>, the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/master/module/app/src/decorator.ts#L24">@Application</a> is a synonym for <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/master/module/di/src/decorator.ts#L29">@Injectable</a>, and inherits all the abilities of dependency injection.  This should allow for setup for any specific application that needs to be run.

For example:

      <figure class="code">
      <figcaption class="code">Example of Application target
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/app/doc/entry-simple.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Injectable<span class="token punctuation">,</span> Inject <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/di'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Application <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/app'</span><span class="token punctuation">;</span>

@<span class="token meta">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{{'{'}}</span>
  name <span class="token operator">=</span> <span class="token string">'roger'</span><span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span>

@<span class="token meta">Application</span><span class="token punctuation">(</span><span class="token string">'simple'</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">SimpleApp</span> <span class="token punctuation">{{'{'}}</span>

  @<span class="token meta">Inject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  server<span class="token operator">:</span> Server<span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>server<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

Additionally, the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/master/module/app/src/decorator.ts#L24">@Application</a> decorator exposes some additional functionality, which can be used to launch the application.

<h2 id="-code-class-item-method-run-code-arguments"><code class="item method">.run()</code> Arguments</h2>
The arguments specified in the <code class="item method">run</code> method are extracted via code transformation, and are able to be bound when invoking the application.  Whether from the command line or a plugin, the parameters will be mapped to the inputs of <code class="item method">run</code>.  For instance:
  

      <figure class="code">
      <figcaption class="code">Simple Entry Point with Parameters
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/app/doc/domain.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Application <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/app'</span><span class="token punctuation">;</span>

@<span class="token meta">Application</span><span class="token punctuation">(</span><span class="token string">'simple-domain'</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">SimpleApp</span> <span class="token punctuation">{{'{'}}</span>
  <span class="token keyword">async</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter">domain<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> port <span class="token operator">=</span> <span class="token number">3000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Launching'</span><span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span> domain<span class="token punctuation">,</span> port <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

<h2 id="cli-run">CLI - run</h2>

The run command allows for invocation of applications as defined by the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/master/module/app/src/decorator.ts#L24">@Application</a> decorator.  Additionally, the environment can manually be specified (dev, test, prod).

      <figure class="terminal">
      <figcaption class="terminal">CLI Run Help
      
      </figcaption>
      <pre><code class="language-bash">$ trv run --help

Usage:  run <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>application<span class="token punctuation">]</span> <span class="token punctuation">[</span>args<span class="token punctuation">..</span>.<span class="token punctuation">]</span>

Options:
  -e, --env <span class="token punctuation">[</span>env<span class="token punctuation">]</span>             Application environment <span class="token punctuation">(</span>dev<span class="token operator">|</span>prod<span class="token operator">|</span><span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token punctuation">)</span>
  -p, --profile <span class="token punctuation">[</span>profile<span class="token punctuation">]</span>     Specify additional application profiles <span class="token punctuation">(</span>default: <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  -r, --resource <span class="token punctuation">[</span>resources<span class="token punctuation">]</span>  Specify additional resource locations <span class="token punctuation">(</span>default: <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  -h, --help                  display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token builtin class-name">command</span>

Available Applications:

   ● complex
     ----------------------------------------
     usage: complex domain:string port:number
     file:  doc/complex.ts

   ● simple
     ----------------------------------------------
     usage: simple domain:string <span class="token punctuation">[</span>port:number<span class="token operator">=</span><span class="token number">3000</span><span class="token punctuation">]</span>
     file:  doc/simple.ts

   ● simple-domain
     -----------------------------------------------------
     usage: simple-domain domain:string <span class="token punctuation">[</span>port:number<span class="token operator">=</span><span class="token number">3000</span><span class="token punctuation">]</span>
     file:  doc/domain.ts

   ● test-eptest
     --------------------------------------------------------
     usage: test-eptest <span class="token punctuation">[</span>age:number<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>format:html<span class="token operator">|</span><span class="token assign-left variable">pdf</span><span class="token operator">=</span>html<span class="token punctuation">]</span>
     file:  doc/entry.ts</code></pre>     
      </figure>

Running without specifying an application <code class="item command"></code>, will display all the available apps, and would look like:

      <figure class="terminal">
      <figcaption class="terminal">Sample CLI Output
      
      </figcaption>
      <pre><code class="language-bash">$ trv run

Usage: trv run <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>application<span class="token punctuation">]</span> <span class="token punctuation">[</span>args<span class="token punctuation">..</span>.<span class="token punctuation">]</span>

Options:
  -e, --env <span class="token punctuation">[</span>env<span class="token punctuation">]</span>             Application environment <span class="token punctuation">(</span>dev<span class="token operator">|</span>prod<span class="token operator">|</span><span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token punctuation">)</span>
  -p, --profile <span class="token punctuation">[</span>profile<span class="token punctuation">]</span>     Specify additional application profiles <span class="token punctuation">(</span>default: <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  -r, --resource <span class="token punctuation">[</span>resources<span class="token punctuation">]</span>  Specify additional resource locations <span class="token punctuation">(</span>default: <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  -h, --help                  display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token builtin class-name">command</span>

Available Applications:

   ● complex
     ----------------------------------------
     usage: complex domain:string port:number
     file:  doc/complex.ts

   ● simple
     ----------------------------------------------
     usage: simple domain:string <span class="token punctuation">[</span>port:number<span class="token operator">=</span><span class="token number">3000</span><span class="token punctuation">]</span>
     file:  doc/simple.ts

   ● simple-domain
     -----------------------------------------------------
     usage: simple-domain domain:string <span class="token punctuation">[</span>port:number<span class="token operator">=</span><span class="token number">3000</span><span class="token punctuation">]</span>
     file:  doc/domain.ts

   ● test-eptest
     --------------------------------------------------------
     usage: test-eptest <span class="token punctuation">[</span>age:number<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>format:html<span class="token operator">|</span><span class="token assign-left variable">pdf</span><span class="token operator">=</span>html<span class="token punctuation">]</span>
     file:  doc/entry.ts</code></pre>     
      </figure>

To invoke the <code class="item input">simple</code> application, you need to pass <code class="item input">domain</code> where port is optional with a default.
  

      <figure class="terminal">
      <figcaption class="terminal">Invoke Simple
      
      </figcaption>
      <pre><code class="language-bash">$ trv run simple-domain mydomain.biz <span class="token number">4000</span>

<span class="token number">2021</span>-03-14T05:00:00.618Z info  <span class="token punctuation">[</span>@trv:app/registry:31<span class="token punctuation">]</span> Running application <span class="token punctuation">{{'{'}}</span> name: <span class="token string">'simple-domain'</span>, filename: <span class="token string">'./doc/domain.ts'</span> <span class="token punctuation">{{'}'}}</span>
<span class="token number">2021</span>-03-14T05:00:00.837Z info  <span class="token punctuation">[</span>@trv:app/registry:35<span class="token punctuation">]</span> Configured <span class="token punctuation">{{'{'}}</span>
  app: <span class="token punctuation">{{'{'}}</span>
    dynamicModules: <span class="token punctuation">{{'{'}}</span>
      <span class="token string">'@travetto/base'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/base'</span>,
      <span class="token string">'@travetto/boot'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/boot'</span>,
      <span class="token string">'@travetto/cli'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/cli'</span>,
      <span class="token string">'@travetto/compiler'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/compiler'</span>,
      <span class="token string">'@travetto/config'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/config'</span>,
      <span class="token string">'@travetto/di'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/di'</span>,
      <span class="token string">'@travetto/doc'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/doc'</span>,
      <span class="token string">'@travetto/log'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/log'</span>,
      <span class="token string">'@travetto/registry'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/registry'</span>,
      <span class="token string">'@travetto/test'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/test'</span>,
      <span class="token string">'@travetto/transformer'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/transformer'</span>,
      <span class="token string">'@travetto/watch'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/watch'</span>,
      <span class="token string">'@travetto/worker'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/worker'</span>,
      <span class="token string">'@travetto/yaml'</span><span class="token builtin class-name">:</span> <span class="token string">'/home/tim/Code/travetto/module/yaml'</span>
    <span class="token punctuation">{{'}'}}</span>,
    watch: true,
    readonly: false,
    travetto: <span class="token string">'2.0.0'</span>,
    name: <span class="token string">'@travetto/app'</span>,
    version: <span class="token string">'2.0.0'</span>,
    license: <span class="token string">'MIT'</span>,
    description: <span class="token string">'Application registration/management and run support.'</span>,
    author: <span class="token punctuation">{{'{'}}</span> email: <span class="token string">'travetto.framework@gmail.com'</span>, name: <span class="token string">'Travetto Framework'</span> <span class="token punctuation">{{'}'}}</span>,
    env: <span class="token string">'dev'</span>,
    prod: false,
    profiles: <span class="token punctuation">[</span> <span class="token string">'application'</span>, <span class="token string">'dev'</span> <span class="token punctuation">]</span>,
    localSourceFolders: <span class="token punctuation">[</span> <span class="token string">'doc'</span> <span class="token punctuation">]</span>,
    commonSourceFolders: <span class="token punctuation">[</span> <span class="token string">'src'</span> <span class="token punctuation">]</span>,
    resourceFolders: <span class="token punctuation">[</span> <span class="token string">'resources'</span>, <span class="token string">'doc/resources'</span> <span class="token punctuation">]</span>,
    debug: <span class="token punctuation">{{'{'}}</span> status: false, value: undefined <span class="token punctuation">{{'}'}}</span>,
    shutdownWait: <span class="token number">2000</span>
  <span class="token punctuation">{{'}'}}</span>,
  config: <span class="token punctuation">{{'{'}}</span><span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span>
<span class="token number">2021</span>-03-14T05:00:01.510Z info  <span class="token punctuation">[</span>@trv:app/doc/domain:6<span class="token punctuation">]</span> Launching <span class="token punctuation">{{'{'}}</span> domain: <span class="token string">'mydomain.biz'</span>, port: <span class="token number">4000</span> <span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

<h2 id="type-checking">Type Checking</h2>

The parameters to <code class="item method">run</code> will be type checked, to ensure proper evaluation.

      <figure class="terminal">
      <figcaption class="terminal">Invoke Simple with bad port
      
      </figcaption>
      <pre><code class="language-bash">$ trv run simple-domain mydomain.biz orange</code></pre>     
      </figure>

The types are inferred from the <code class="item method">.run()</code> method parameters, but can be overridden in the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/master/module/app/src/decorator.ts#L24">@Application</a> 
annotation to support customization. Only primitive types are supported:

<ul> <li><code class="item input">number</code> - Float or decimal</li>
 <li><code class="item input">string</code> - Default if no type is specified</li>
 <li><code class="item input">boolean</code> - true(yes/on/1) and false(no/off/0)</li>
 <li><code class="item input">union</code> - Type unions of the same type (<code class="item input">string_a | string_b</code> or <code class="item input">1 | 2 | 3 | 4</code>)</li></ul>
  
Customizing the types is done by name, and allows for greater control:
  

      <figure class="code">
      <figcaption class="code">Complex Entry Point with Customization
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/app/doc/complex.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Application <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/app'</span><span class="token punctuation">;</span>

@<span class="token meta">Application</span><span class="token punctuation">(</span><span class="token string">'complex'</span><span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span>
  paramMap<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
    domain<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
      title<span class="token operator">:</span> <span class="token string">'Domain Name'</span><span class="token punctuation">,</span>
      <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
      subtype<span class="token operator">:</span> <span class="token string">'url'</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
      title<span class="token operator">:</span> <span class="token string">'Server Port'</span><span class="token punctuation">,</span>
      def<span class="token operator">:</span> <span class="token string">'3000'</span>
    <span class="token punctuation">{{'}'}}</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Complex</span> <span class="token punctuation">{{'{'}}</span>
  <span class="token keyword">async</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter">domain<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> port<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Launching'</span><span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span> domain<span class="token punctuation">,</span> port <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

</div>