<!-- This file was generated by @travetto/doc and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/main/module/jwt/DOC.tsx and execute "npx trv doc" to rebuild -->
<h1>JWT
<small>JSON Web Token implementation</small>
</h1>

  <figure class="install">
    <figcaption class="install">Install @travetto/jwt
    
    </figcaption>
    <pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @travetto/jwt

<span class="token comment"># or</span>

<span class="token function">yarn</span> <span class="token function">add</span> @travetto/jwt</code></pre>
  </figure>

This module is a simple component to support <a target="_blank" class="external-link" href="https://jwt.io/">JWT</a> signing and verification.  The framework provides a port of <a target="_blank" class="external-link" href="https://github.com/auth0/node-jsonwebtoken">node-jsonwebtoken</a>. The API has been streamlined, and is intended as a lower level component as a basis for other modules. <br><br>
The API exposes:

  <figure class="code">
    <figcaption class="code">Signing Options
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/jwt/src/types.ts#L132">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">SignOptions</span> <span class="token punctuation">{{'{'}}</span>
  <span class="token comment">/**
   * Key to use
   */</span>
  key<span class="token operator">?</span><span class="token operator">:</span> Key<span class="token punctuation">;</span>
  <span class="token comment">/**
   * Ignore issued
   */</span>
  iatExclude<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Algorithm
   */</span>
  alg<span class="token operator">?</span><span class="token operator">:</span> AlgType<span class="token punctuation">;</span>
  <span class="token comment">/**
   * Header type
   */</span>
  header<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
    typ<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'JWT'</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Encoding for key
   */</span>
  encoding<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span></code></pre>
  </figure>

  <figure class="code">
    <figcaption class="code">Verify Options
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/jwt/src/types.ts#L65">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">VerifyOptions</span> <span class="token operator">=</span> <span class="token punctuation">{{'{'}}</span>
  <span class="token comment">/**
   * Clock starting point
   */</span>
  clock<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token comment">/**
     * Time to check against
     */</span>
    timestamp<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> Date<span class="token punctuation">;</span>
    <span class="token comment">/**
     * Time tolerance
     */</span>
    tolerance<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Ignore various checks
   */</span>
  ignore<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token comment">/**
     * Ignore expiration time
     */</span>
    exp<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Ignore not before timestamp
     */</span>
    nbf<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Max age in seconds
   */</span>
  maxAgeSec<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Header
   */</span>
  header<span class="token operator">?</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Encryption key
   */</span>
  key<span class="token operator">?</span><span class="token operator">:</span> Key<span class="token punctuation">;</span>
  <span class="token comment">/**
   * Encoding
   */</span>
  encoding<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Algorithms to use
   */</span>
  alg<span class="token operator">?</span><span class="token operator">:</span> AlgType <span class="token operator">|</span> AlgType<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">/**
   * Payload audience to check
   */</span>
  payload<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
    aud<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> RegExp <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token operator">|</span> RegExp<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span> <span class="token operator">&amp;</span> PayloadCore<span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span></code></pre>
  </figure>

  <figure class="code">
    <figcaption class="code">API
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/jwt/src/util.ts#L7">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">JWTUtil</span> <span class="token punctuation">{{'{'}}</span>
  <span class="token comment">/**
   * Sign the payload and return a token
   */</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token generic-function"><span class="token function">create</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Payload<span class="token operator">></span></span></span><span class="token punctuation">(</span>payload<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> options<span class="token operator">:</span> SignOptions <span class="token operator">=</span> <span class="token punctuation">{{'{'}}</span><span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Read and return full object with signatures
   */</span>
  <span class="token keyword">static</span> <span class="token generic-function"><span class="token function">read</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Payload <span class="token operator">=</span> Payload<span class="token operator">></span></span></span><span class="token punctuation">(</span>jwt<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> TypedSig<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Rewrite a token with a simple transformation
   */</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token generic-function"><span class="token function">rewrite</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Payload<span class="token operator">></span></span></span><span class="token punctuation">(</span>jwt<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function-variable function">transformer</span><span class="token operator">:</span> <span class="token punctuation">(</span>o<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">T</span><span class="token punctuation">,</span> options<span class="token operator">:</span> SignOptions <span class="token operator">=</span> <span class="token punctuation">{{'{'}}</span><span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Verify the token
   */</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token generic-function"><span class="token function">verify</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>jwt<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">:</span> VerifyOptions <span class="token operator">=</span> <span class="token punctuation">{{'{'}}</span><span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Payload <span class="token operator">&amp;</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span></code></pre>
  </figure>
