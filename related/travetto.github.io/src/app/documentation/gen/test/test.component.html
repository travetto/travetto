<!-- This file was generated by the framweork and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/master/module/test/DOCS.js and execute "npm run docs" to rebuild -->
<div class="documentation">
<h1>Testing
          <small>Declarative test framework</small>

        </h1>

      <figure class="install">
      <figcaption class="install">Install @travetto/test
      
      </figcaption>
      <pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @travetto/test</code></pre>     
      </figure>

This module provides unit testing functionality that integrates with the framework. It is a declarative framework, using decorators to define tests and suites. The test produces results in the following formats:

<ul> <li><a target="_blank" class="external-link" href="https://testanything.org/tap-version-13-specification.html">TAP 13</a>, default and human-readable</li>
 <li><a target="_blank" class="external-link" href="https://www.json.org">JSON</a>, best for integrating with at a code level</li>
 <li><a target="_blank" class="external-link" href="https://en.wikipedia.org/wiki/XUnit">xUnit</a>, standard format for CI/CD systems e.g. Jenkins, Bamboo, etc.</li></ul>

<p class="note"><strong>Note</strong> All tests should be under the <code class="item path">test/.*</code> folders.  The pattern for tests is defined as a regex and not standard globbing.</p>

<h2 id="definition">Definition</h2>

A test suite is a collection of individual tests.  All test suites are classes with the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/master/module/test/src/decorator/suite.ts#L12">@Suite</a> decorator. Tests are defined as methods on the suite class, using the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/master/module/test/src/decorator/test.ts#L9">@Test</a> decorator.  All tests intrinsically support <code class="item input">async</code>/<code class="item input">await</code>.

A simple example would be:

      <figure class="code">
      <figcaption class="code">Example Test Suite
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/test/alt/docs/src/example.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> assert <span class="token keyword">from</span> <span class="token string">'assert'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Suite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/suite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Test <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/test'</span><span class="token punctuation">;</span>

@<span class="token meta">Suite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">SimpleTest</span> <span class="token punctuation">{{'{'}}</span>

  <span class="token keyword">private</span> complexService<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>

  @<span class="token meta">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>complexService<span class="token punctuation">.</span><span class="token function">doLongOp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assert</span><span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>

  @<span class="token meta">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>complexService<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assert</span><span class="token punctuation">(</span><span class="token regex">/abc/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

<h2 id="assertions">Assertions</h2>
A common aspect of the tests themselves are the assertions that are made.  <a target="_blank" class="external-link" href="https://nodejs.org">Node</a> provides a built-in <a target="_blank" class="external-link" href="https://nodejs.org/api/assert.html">assert</a> library.  The framework uses AST transformations to modify the assertions to provide integration with the test module, and to provide a much higher level of detail in the failed assertions.  For example:

      <figure class="code">
      <figcaption class="code">Example assertion for deep comparison
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/test/alt/docs/src/test/assert-example.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> assert <span class="token keyword">from</span> <span class="token string">'assert'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Suite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/suite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Test <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/test'</span><span class="token punctuation">;</span>

@<span class="token meta">Suite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">SimpleTest</span> <span class="token punctuation">{{'{'}}</span>

  @<span class="token meta">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token function">assert</span><span class="token punctuation">(</span><span class="token punctuation">{{'{'}}</span> size<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> address<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span> state<span class="token operator">:</span> <span class="token string">'VA'</span> <span class="token punctuation">{{'}'}}</span> <span class="token punctuation">{{'}'}}</span> <span class="token operator">===</span> <span class="token punctuation">{{'{'}}</span><span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

would translate to:

      <figure class="code">
      <figcaption class="code">Transpiled test Code
      
      </figcaption>
      <pre><code class="language-javascript"><span class="token string">"use strict"</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">"__esModule"</span><span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span> value<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tslib_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"tslib"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ᚕ_check_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@app/src/assert/check.ts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ᚕ_decorator_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@travetto/registry/src/decorator.ts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"assert"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> suite_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"../../../../src/decorator/suite"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> test_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"../../../../src/decorator/test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> SimpleTest <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">SimpleTest</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">async</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
        ᚕ_check_1<span class="token punctuation">.</span>AssertCheck<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">{{'{'}}</span> file<span class="token operator">:</span> <span class="token function">ᚕsrc</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">,</span> line<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">"{{'{'}} size: 20, address: {{'{'}} state: 'VA' {{'}'}} {{'}'}} === {{'{'}}{{'}'}}"</span><span class="token punctuation">,</span> operator<span class="token operator">:</span> <span class="token string">"deepStrictEqual"</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span> size<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> address<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span> state<span class="token operator">:</span> <span class="token string">'VA'</span> <span class="token punctuation">{{'}'}}</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span><span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
SimpleTest<span class="token punctuation">.</span>ᚕinit <span class="token operator">=</span> ᚕ_decorator_1<span class="token punctuation">.</span>Register<span class="token punctuation">.</span><span class="token function">initMeta</span><span class="token punctuation">(</span>SimpleTest<span class="token punctuation">,</span> <span class="token function">ᚕsrc</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">471606460</span><span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span> test<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span> hash<span class="token operator">:</span> <span class="token number">1747552309</span> <span class="token punctuation">{{'}'}}</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tslib_1<span class="token punctuation">.</span><span class="token function">__decorate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    test_1<span class="token punctuation">.</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">{{'{'}}</span> lines<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span> start<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span> codeStart<span class="token operator">:</span> <span class="token number">11</span> <span class="token punctuation">{{'}'}}</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">SimpleTest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SimpleTest <span class="token operator">=</span> tslib_1<span class="token punctuation">.</span><span class="token function">__decorate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    ᚕ_decorator_1<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    suite_1<span class="token punctuation">.</span><span class="token function">Suite</span><span class="token punctuation">(</span><span class="token punctuation">{{'{'}}</span> lines<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span> start<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token number">13</span> <span class="token punctuation">{{'}'}}</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> SimpleTest<span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">'ᚕtrv'</span><span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span> configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>     
      </figure>

This would ultimately produce the error like:

      <figure class="code">
      <figcaption class="code">Sample Validation Error
      
      </figcaption>
      <pre><code class="language-typescript"><span class="token function">AssertionError</span><span class="token punctuation">(</span>
  message<span class="token operator">=</span><span class="token string">"{{'{'}}size: 20, address: {{'{'}}state: 'VA' {{'}'}}{{'}'}} should deeply strictly equal {{'{'}}{{'}'}}"</span>
<span class="token punctuation">)</span></code></pre>     
      </figure>

The equivalences for all of the <a target="_blank" class="external-link" href="https://nodejs.org/api/assert.html">assert</a> operations are:

<ul> <li><code class="item method">assert(a == b)</code> as <code class="item method">assert.equal(a, b)</code></li>
 <li><code class="item method">assert(a !== b)</code> as <code class="item method">assert.notEqual(a, b)</code></li>
 <li><code class="item method">assert(a === b)</code> as <code class="item method">assert.strictEqual(a, b)</code></li>
 <li><code class="item method">assert(a !== b)</code> as <code class="item method">assert.notStrictEqual(a, b)</code></li>
 <li><code class="item method">assert(a &gt;= b)</code> as <code class="item method">assert.greaterThanEqual(a, b)</code></li>
 <li><code class="item method">assert(a &gt; b)</code> as <code class="item method">assert.greaterThan(a, b)</code></li>
 <li><code class="item method">assert(a &lt;= b)</code> as <code class="item method">assert.lessThanEqual(a, b)</code></li>
 <li><code class="item method">assert(a &lt; b)</code> as <code class="item method">assert.lessThan(a, b)</code></li>
 <li><code class="item method">assert(a instanceof b)</code> as <code class="item method">assert.instanceOf(a, b)</code></li>
 <li><code class="item method">assert(a.includes(b))</code> as <code class="item method">assert.ok(a.includes(b))</code></li>
 <li><code class="item method">assert(/a/.test(b))</code> as <code class="item method">assert.ok(/a/.test(b))</code></li></ul>

In addition to the standard operations, there is support for throwing/rejecting errors (or the inverse).  This is useful for testing error states or ensuring errors do not occur.

<ul> <li><code class="item method">throws</code>/<code class="item method">doesNotThrow</code> is for catching synchronous rejections
  
      <figure class="code">
      <figcaption class="code">Throws vs Does Not Throw
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/test/alt/docs/src/throws.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> assert <span class="token keyword">from</span> <span class="token string">'assert'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Suite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/suite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Test <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/test'</span><span class="token punctuation">;</span>

@<span class="token meta">Suite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">SimpleTest</span> <span class="token punctuation">{{'{'}}</span>

  @<span class="token meta">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">testThrows</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    assert<span class="token punctuation">.</span><span class="token function">throws</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{{'{'}}</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    assert<span class="token punctuation">.</span><span class="token function">doesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{{'{'}}</span>

      <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>
  </li>
 <li><code class="item method">rejects</code>/<code class="item method">doesNotReject</code> is for catching asynchronous rejections
  
      <figure class="code">
      <figcaption class="code">Rejects vs Does Not Reject
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/test/alt/docs/src/rejects.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> assert <span class="token keyword">from</span> <span class="token string">'assert'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Suite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/suite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Test <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/test'</span><span class="token punctuation">;</span>

@<span class="token meta">Suite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">SimpleTest</span> <span class="token punctuation">{{'{'}}</span>

  @<span class="token meta">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">testRejects</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">await</span> assert<span class="token punctuation">.</span><span class="token function">rejects</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{{'{'}}</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> assert<span class="token punctuation">.</span><span class="token function">doesNotReject</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{{'{'}}</span>

      <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>
  </li></ul>

Additionally, the <code class="item method">throws</code>/<code class="item method">rejects</code> assertions take in a secondary parameter to allow for specification of the type of error expected.  This can be:
<ul> <li>A regular expression or string to match against the error's message</li>
 <li>A class to ensure the returned error is an instance of the class passed in</li>
 <li>A function to allow for whatever custom verification of the error is needed</li></ul>

      <figure class="code">
      <figcaption class="code">Example of different Error matching paradigms
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/test/alt/docs/src/error-types.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> assert <span class="token keyword">from</span> <span class="token string">'assert'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Suite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/suite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Test <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/test/src/decorator/test'</span><span class="token punctuation">;</span>

@<span class="token meta">Suite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">SimpleTest</span> <span class="token punctuation">{{'{'}}</span>

  @<span class="token meta">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">errorTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    assert<span class="token punctuation">.</span><span class="token function">throws</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{{'{'}}</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Big Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">,</span> <span class="token string">'Big Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    assert<span class="token punctuation">.</span><span class="token function">throws</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{{'{'}}</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Big Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">,</span> <span class="token regex">/B.*Error/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> assert<span class="token punctuation">.</span><span class="token function">rejects</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{{'{'}}</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Big Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">,</span> Error<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> assert<span class="token punctuation">.</span><span class="token function">rejects</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{{'{'}}</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Big Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token operator">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
      err<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'Big'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> err<span class="token punctuation">.</span>message<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> err
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

<h2 id="running-tests">Running Tests</h2>

To run the tests you can either call the <a class="module-link" href="/docs/cli" title="CLI infrastructure for travetto framework">Command Line Interface</a> by invoking

      <figure class="terminal">
      <figcaption class="terminal">Test Help Output
      
      </figcaption>
      <pre><code class="language-bash">$ travetto travetto <span class="token builtin class-name">test</span> --help

Usage:  <span class="token builtin class-name">test</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>regexes<span class="token punctuation">..</span>.<span class="token punctuation">]</span>

Options:
  -f, --format <span class="token operator">&lt;</span>format<span class="token operator">></span>            Output <span class="token function">format</span> <span class="token keyword">for</span> <span class="token builtin class-name">test</span> results <span class="token punctuation">(</span>default:
                                   <span class="token string">"tap"</span><span class="token punctuation">)</span>
  -c, --concurrency <span class="token operator">&lt;</span>concurrency<span class="token operator">></span>  Number of tests to run concurrently
                                   <span class="token punctuation">(</span>default: <span class="token string">"4"</span><span class="token punctuation">)</span>
  -m, --mode <span class="token operator">&lt;</span>mode<span class="token operator">></span>                Test run mode <span class="token punctuation">(</span>default: <span class="token string">"all"</span><span class="token punctuation">)</span>
  -h, --help                       display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token builtin class-name">command</span></code></pre>     
      </figure>

The regexes are the patterns of tests you want to run, and all tests must be found under the <code class="item path">test/</code> folder.

<h3 id="travetto-plugin">Travetto Plugin</h3>

The <a target="_blank" class="external-link" href="https://marketplace.visualstudio.com/items?itemName=arcsine.travetto-plugin">VSCode plugin</a> also supports test running,  which will provide even more functionality for real-time testing and debugging.

<h2 id="additional-considerations">Additional Considerations</h2>
During the test execution, a few things additionally happen that should be helpful.  The primary addition, is that all console output is captured, and will be exposed in the test output.  This allows for investigation at a later point in time by analyzing the output.

Like output, all promises are also intercepted.  This allows the code to ensure that all promises have been resolved before completing the test.  Any uncompleted promises will automatically trigger an error state and fail the test.

</div>