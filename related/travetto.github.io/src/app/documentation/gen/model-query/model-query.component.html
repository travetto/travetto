<!-- This file was generated by &#64;travetto/doc and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/main/module/model-query/DOC.tsx and execute "npx trv doc" to rebuild -->
<h1>Data Model Querying
<small>Datastore abstraction for advanced query support.</small>
</h1>

  <figure class="install">
    <figcaption class="install">Install &#64;travetto/model-query
    
    </figcaption>
    <pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> &#64;travetto/model-query

<span class="token comment"># or</span>

<span class="token function">yarn</span> <span class="token function">add</span> &#64;travetto/model-query</code></pre>
  </figure>

This module provides an enhanced query contract for <a class="module-link" routerLink="/docs/model" title="Datastore abstraction for core operations.">Data Modeling Support</a> implementations.  This contract has been externalized due to it being more complex than many implementations can natively support.
<h2 id="contracts">Contracts</h2>

<h3 id="query">Query</h3>

This contract provides the ability to apply the query support to return one or many items, as well as providing counts against a specific query.

  <figure class="code">
    <figcaption class="code">Query
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/model-query/src/types/query.ts#L10">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ModelQuerySupport</span> <span class="token punctuation">{{'{'}}</span>
  <span class="token comment">/**
   * Executes a query against the model space
   * &#64;param cls The model class
   * &#64;param query The query to execute
   */</span>
  <span class="token generic-function"><span class="token function">query</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> ModelType<span class="token operator">></span></span></span><span class="token punctuation">(</span>cls<span class="token operator">:</span> Class<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> query<span class="token operator">:</span> PageableModelQuery<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Find one by query, fail if not found
   * &#64;param cls The model class
   * &#64;param query The query to search for
   * &#64;param failOnMany Should the query fail on more than one result found, defaults to true
   */</span>
  <span class="token generic-function"><span class="token function">queryOne</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> ModelType<span class="token operator">></span></span></span><span class="token punctuation">(</span>cls<span class="token operator">:</span> Class<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> query<span class="token operator">:</span> ModelQuery<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> failOnMany<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Find the count of matching documents by query.
   * &#64;param cls The model class
   * &#64;param query The query to count for
   */</span>
  <span class="token generic-function"><span class="token function">queryCount</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> ModelType<span class="token operator">></span></span></span><span class="token punctuation">(</span>cls<span class="token operator">:</span> Class<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> query<span class="token operator">:</span> ModelQuery<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span></code></pre>
  </figure>

<h3 id="crud">Crud</h3>

Reinforcing the complexity provided in these contracts, the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/main/module/model-query/src/types/crud.ts#L11">Query Crud</a> contract allows for bulk update/deletion by query.  This requires the underlying implementation to support these operations.

  <figure class="code">
    <figcaption class="code">Query Crud
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/model-query/src/types/crud.ts#L11">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ModelQueryCrudSupport</span> <span class="token keyword">extends</span> <span class="token class-name">ModelCrudSupport</span><span class="token punctuation">,</span> ModelQuerySupport <span class="token punctuation">{{'{'}}</span>
  <span class="token comment">/**
   * A standard update operation, but ensures the data matches the query before the update is finalized
   * &#64;param cls The model class
   * &#64;param data The data
   * &#64;param query The additional query to validate
  */</span>
  <span class="token generic-function"><span class="token function">updateByQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> ModelType<span class="token operator">></span></span></span><span class="token punctuation">(</span>cls<span class="token operator">:</span> Class<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> query<span class="token operator">:</span> ModelQuery<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Update all with partial data, by query
   * &#64;param cls The model class
   * &#64;param query The query to search for
   * &#64;param data The partial data
   */</span>
  <span class="token generic-function"><span class="token function">updatePartialByQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> ModelType<span class="token operator">></span></span></span><span class="token punctuation">(</span>cls<span class="token operator">:</span> Class<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> query<span class="token operator">:</span> ModelQuery<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> data<span class="token operator">:</span> Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Delete all by query
   * &#64;param cls The model class
   * &#64;param query Query to search for deletable elements
   */</span>
  <span class="token generic-function"><span class="token function">deleteByQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> ModelType<span class="token operator">></span></span></span><span class="token punctuation">(</span>cls<span class="token operator">:</span> Class<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> query<span class="token operator">:</span> ModelQuery<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span></code></pre>
  </figure>

<h3 id="facet">Facet</h3>

With the complex nature of the query support, the ability to find counts by groups is a common and desirable pattern. This contract allows for faceting on a given field, with query filtering.

  <figure class="code">
    <figcaption class="code">Query Facet
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/model-query/src/types/facet.ts#L12">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ModelQueryFacetSupport</span> <span class="token keyword">extends</span> <span class="token class-name">ModelQuerySupport</span> <span class="token punctuation">{{'{'}}</span>
  <span class="token comment">/**
   * Facet a given class on a specific field, limited by an optional query
   * &#64;param cls The model class to facet on
   * &#64;param field The field to facet on
   * &#64;param query Additional query filtering
   */</span>
  <span class="token generic-function"><span class="token function">facet</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> ModelType<span class="token operator">></span></span></span><span class="token punctuation">(</span>cls<span class="token operator">:</span> Class<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> field<span class="token operator">:</span> ValidStringFields<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> query<span class="token operator">?</span><span class="token operator">:</span> ModelQuery<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">{{'{'}}</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> count<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span></code></pre>
  </figure>

<h3 id="suggest">Suggest</h3>

Additionally, this same pattern avails it self in a set of suggestion methods that allow for powering auto completion and type-ahead functionalities.

  <figure class="code">
    <figcaption class="code">Query Suggest
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/model-query/src/types/suggest.ts#L12">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ModelQuerySuggestSupport</span> <span class="token keyword">extends</span> <span class="token class-name">ModelQuerySupport</span> <span class="token punctuation">{{'{'}}</span>
  <span class="token comment">/**
   * Suggest instances for a given cls and a given field (allows for duplicates with as long as they have different ids)
   *
   * &#64;param cls The model class to suggest on
   * &#64;param field The field to suggest on
   * &#64;param prefix The search prefix for the given field
   * &#64;param query A query to filter the search on, in addition to the prefix
   */</span>
  <span class="token generic-function"><span class="token function">suggest</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> ModelType<span class="token operator">></span></span></span><span class="token punctuation">(</span>cls<span class="token operator">:</span> Class<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> field<span class="token operator">:</span> ValidStringFields<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> prefix<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> query<span class="token operator">?</span><span class="token operator">:</span> PageableModelQuery<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Suggest distinct values for a given cls and a given field
   *
   * &#64;param cls The model class to suggest on
   * &#64;param field The field to suggest on
   * &#64;param prefix The search prefix for the given field
   * &#64;param query A query to filter the search on, in addition to the prefix
   */</span>
  <span class="token generic-function"><span class="token function">suggestValues</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> ModelType<span class="token operator">></span></span></span><span class="token punctuation">(</span>cls<span class="token operator">:</span> Class<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> field<span class="token operator">:</span> ValidStringFields<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> prefix<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> query<span class="token operator">?</span><span class="token operator">:</span> PageableModelQuery<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span></code></pre>
  </figure>

<h2 id="implementations">Implementations</h2>

<table><thead><tr><td>Service</td>
<td>Query</td>
<td>QueryCrud</td>
<td>QueryFacet</td>
</tr>
</thead>
<tbody><tr><td><a class="module-link" routerLink="/docs/model-elasticsearch" title="Elasticsearch backing for the travetto model module, with real-time modeling support for Elasticsearch mappings.">Elasticsearch Model Source</a></td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr><td><a class="module-link" routerLink="/docs/model-mongo" title="Mongo backing for the travetto model module.">MongoDB Model Support</a></td>
<td>X'</td>
<td>X'</td>
<td>X'</td>
</tr>
<tr><td><a class="module-link" routerLink="/docs/model-sql" title="SQL backing for the travetto model module, with real-time modeling support for SQL schemas.">SQL Model Service</a></td>
<td>X'</td>
<td>X'</td>
<td>X'</td>
</tr>
</tbody>
</table>

<h2 id="querying">Querying</h2>

One of the complexities of abstracting multiple storage mechanisms, is providing a consistent query language.  The query language the module uses is a derivation of <a target="_blank" class="external-link" href="https://mongodb.com">mongodb</a>'s query language, with some restrictions, additions, and caveats. Additionally, given the nature of typescript, all queries are statically typed, and will catch type errors at compile time.
<h3 id="general-fields">General Fields</h3>

<ul> <li><code class="item input">field: {{'{'}} $eq: T {{'}'}}</code> to determine if a field is equal to a value</li>
<li><code class="item input">field: {{'{'}} $ne: T {{'}'}}</code> to determine if a field is not equal to a value</li>
<li><code class="item input">field: {{'{'}} $exists: boolean {{'}'}}</code> to determine if a field exists or not, or for arrays, if its empty or not</li>
<li><code class="item input">field: T</code> to see if the field is equal to whatever value is passed in`</li>
</ul>

<h3 id="general-single-valued-fields">General Single Valued Fields</h3>

<ul> <li><code class="item input">field: {{'{'}} $in: T[] {{'}'}}</code> to see if a record's value appears in the array provided to <code class="item input">$in</code></li>
<li><code class="item input">field: {{'{'}} $nin: T[] {{'}'}}</code> to see if a record's value does not appear in the array provided to <code class="item input">$in</code></li>
</ul>

<h3 id="ordered-numeric-fields">Ordered Numeric Fields</h3>

<ul> <li><code class="item input">field: {{'{'}} $lt: number {{'}'}}</code> checks if value is less than</li>
<li><code class="item input">field: {{'{'}} $lte: number {{'}'}}</code> checks if value is less than or equal to</li>
<li><code class="item input">field: {{'{'}} $gt: number {{'}'}}</code> checks if value is greater than</li>
<li><code class="item input">field: {{'{'}} $gte: number {{'}'}}</code> checks if value is greater than or equal to</li>
</ul>

<h3 id="ordered-date-fields">Ordered Date Fields</h3>

<ul> <li><code class="item input">field: {{'{'}} $lt: Date | RelativeTime {{'}'}}</code> checks if value is less than</li>
<li><code class="item input">field: {{'{'}} $lte: Date | RelativeTime {{'}'}}</code> checks if value is less than or equal to</li>
<li><code class="item input">field: {{'{'}} $gt: Date | RelativeTime {{'}'}}</code> checks if value is greater than</li>
<li><code class="item input">field: {{'{'}} $gte: Date | RelativeTime {{'}'}}</code> checks if value is greater than or equal to</li>
</ul>

<p class="note"><strong>Note</strong> Relative times are strings consisting of a number and a unit.  e.g. -1w or 30d.  These times are always relative to Date.now, but should make building queries more natural.</p>

<h3 id="array-fields">Array Fields</h3>

<ul> <li><code class="item input">field: {{'{'}} $all: T[]] {{'}'}}</code> checks to see if the records value contains everything within <code class="item input">$all</code></li>
</ul>

<h3 id="string-fields">String Fields</h3>

<ul> <li><code class="item input">field: {{'{'}} $regex: RegExp | string; {{'}'}}</code> checks the field against the regular expression</li>
</ul>

<h3 id="geo-point-fields">Geo Point Fields</h3>

<ul> <li><code class="item input">field: {{'{'}} $geoWithin: Point[] {{'}'}}</code> determines if the value is within the bounding region of the points</li>
<li><code class="item input">field: {{'{'}} $near: Point, $maxDistance: number, $unit: 'km' | 'm' | 'mi' | 'ft' {{'}'}}</code> searches at a point, and looks out radially</li>
</ul>

<h3 id="groupings">Groupings</h3>

<ul> <li><code class="item input">{{'{'}} $and: [] {{'}'}}</code> provides a grouping in which all sub clauses are require,</li>
<li><code class="item input">{{'{'}} $or: [] {{'}'}}</code> provides a grouping in which at least one of the sub clauses is require,</li>
<li><code class="item input">{{'{'}} $not: {{'{'}} {{'}'}} {{'}'}}</code> negates a clause</li>
</ul>
A sample query for <code class="item input">User</code>'s might be:

  <figure class="code">
    <figcaption class="code">Using the query structure for specific queries
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/model-query/doc/user-query.ts">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> ModelQuerySupport <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/model-query'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> User <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'./user'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UserSearch</span> <span class="token punctuation">{{'{'}}</span>
  service<span class="token operator">:</span> ModelQuerySupport<span class="token punctuation">;</span>

  <span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span>
      where<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
        $and<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{{'{'}}</span>
            $not<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
              age<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
                $lt<span class="token operator">:</span> <span class="token number">35</span>
              <span class="token punctuation">{{'}'}}</span>
            <span class="token punctuation">{{'}'}}</span>
          <span class="token punctuation">{{'}'}}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{{'{'}}</span>
            contact<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span>
              $exists<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">{{'}'}}</span>
          <span class="token punctuation">{{'}'}}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">{{'}'}}</span>
    <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>
  </figure>

This would find all users who are over <code class="item input">35</code> and that have the <code class="item input">contact</code> field specified.

<h2 id="custom-model-query-service">Custom Model Query Service</h2>

In addition to the provided contracts, the module also provides common utilities and shared test suites.The common utilities are useful for repetitive functionality, that is unable to be shared due to not relying upon inheritance(this was an intentional design decision).This allows for all the <a class="module-link" routerLink="/docs/model-query" title="Datastore abstraction for advanced query support.">Data Model Querying</a> implementations to completely own the functionality and also to be able to provide additional / unique functionality that goes beyond the interface. To enforce that these contracts are honored, the module provides shared test suites to allow for custom implementations to ensure they are adhering to the contract's expected behavior.

  <figure class="code">
    <figcaption class="code">MongoDB Service Test Configuration
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/model-query/doc/service.query.ts">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Suite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/test'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Config <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/config'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Injectable <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/di'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> ModelQueryFacetSupport<span class="token punctuation">,</span> ModelQuerySuggestSupport<span class="token punctuation">,</span> ModelQueryCrudSupport <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/model-query'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> ModelQuerySuite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/model-query/support/test/query'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> ModelQueryCrudSuite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/model-query/support/test/crud'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> ModelQueryFacetSuite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/model-query/support/test/facet'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> ModelQueryPolymorphismSuite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/model-query/support/test/polymorphism'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> ModelQuerySuggestSuite <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'&#64;travetto/model-query/support/test/suggest'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> QueryModelService <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'./query-service'</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">&#64;</span><span class="token function">Config</span></span><span class="token punctuation">(</span><span class="token string">'model.custom'</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">CustomModelConfig</span> <span class="token punctuation">{{'{'}}</span> <span class="token punctuation">{{'}'}}</span>

<span class="token decorator"><span class="token at operator">&#64;</span><span class="token function">Injectable</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">CustomModelService</span> <span class="token keyword">extends</span> <span class="token class-name">QueryModelService</span> <span class="token keyword">implements</span> <span class="token class-name">ModelQueryCrudSupport</span><span class="token punctuation">,</span> ModelQueryFacetSupport<span class="token punctuation">,</span> ModelQuerySuggestSupport <span class="token punctuation">{{'{'}}</span>
<span class="token punctuation">{{'}'}}</span>

<span class="token decorator"><span class="token at operator">&#64;</span><span class="token function">Suite</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CustomQuerySuite</span> <span class="token keyword">extends</span> <span class="token class-name">ModelQuerySuite</span> <span class="token punctuation">{{'{'}}</span>
  serviceClass <span class="token operator">=</span> CustomModelService<span class="token punctuation">;</span>
  configClass <span class="token operator">=</span> CustomModelConfig<span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span>

<span class="token decorator"><span class="token at operator">&#64;</span><span class="token function">Suite</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CustomQueryCrudSuite</span> <span class="token keyword">extends</span> <span class="token class-name">ModelQueryCrudSuite</span> <span class="token punctuation">{{'{'}}</span>
  serviceClass <span class="token operator">=</span> CustomModelService<span class="token punctuation">;</span>
  configClass <span class="token operator">=</span> CustomModelConfig<span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span>

<span class="token decorator"><span class="token at operator">&#64;</span><span class="token function">Suite</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CustomQueryFacetSuite</span> <span class="token keyword">extends</span> <span class="token class-name">ModelQueryFacetSuite</span> <span class="token punctuation">{{'{'}}</span>
  serviceClass <span class="token operator">=</span> CustomModelService<span class="token punctuation">;</span>
  configClass <span class="token operator">=</span> CustomModelConfig<span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span>

<span class="token decorator"><span class="token at operator">&#64;</span><span class="token function">Suite</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CustomQueryPolymorphismSuite</span> <span class="token keyword">extends</span> <span class="token class-name">ModelQueryPolymorphismSuite</span> <span class="token punctuation">{{'{'}}</span>
  serviceClass <span class="token operator">=</span> CustomModelService<span class="token punctuation">;</span>
  configClass <span class="token operator">=</span> CustomModelConfig<span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span>

<span class="token decorator"><span class="token at operator">&#64;</span><span class="token function">Suite</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CustomQuerySuggestSuite</span> <span class="token keyword">extends</span> <span class="token class-name">ModelQuerySuggestSuite</span> <span class="token punctuation">{{'{'}}</span>
  serviceClass <span class="token operator">=</span> CustomModelService<span class="token punctuation">;</span>
  configClass <span class="token operator">=</span> CustomModelConfig<span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span></code></pre>
  </figure>
