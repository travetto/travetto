<!-- This file was generated by the framweork and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/master/module/pack/DOCS.js and execute "npm run docs" to rebuild -->
<div class="documentation">
<h1>Pack
          <small>Code packing utilities</small>

        </h1>

      <figure class="install">
      <figcaption class="install">Install @travetto/pack
      
      </figcaption>
      <pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @travetto/pack</code></pre>     
      </figure>

<h2 id="cli-pack">CLI - pack</h2> 

      <figure class="terminal">
      <figcaption class="terminal">Pack usage
      
      </figcaption>
      <pre><code class="language-bash">$ travetto pack --help

Usage:  pack <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>mode<span class="token punctuation">]</span>

Options:
  -w --workspace <span class="token punctuation">[</span>workspace<span class="token punctuation">]</span>  Workspace directory <span class="token punctuation">(</span>default: <span class="token string">"/tmp/pack_travetto_pack"</span><span class="token punctuation">)</span>
  -h, --help                  display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token builtin class-name">command</span></code></pre>     
      </figure>

This command line operation will compile your project, and produce a ready to use workspace as a deliverable. The pack operation is actually a wrapper around multiple sub-operations that are run in series to produce the desired final structure for deployment.  The currently support operations are:

<ul> <li>assemble</li>
 <li>zip</li>
 <li>docker</li></ul>

<h3 id="cli-pack-assemble">CLI - pack:assemble</h3>

Assemble is the operation that stages the project's code for deployment.  The assembly process goes through the following operations:

<ol> <li>Cleaning Workspace - Cleans workspace to start with an empty workspace</li>
 <li>Copying Dependencies - Computes the prod depedencies and copies them into the new workspace</li>
 <li>Copying App Content - Copies over application content (src/resources/support/bin)</li>
 <li>Excluding Pre-Compile Files - Any files that should be excluded pre-compilation, are removed</li>
 <li>Compiling - Compiles the code in the new workspace, isolating it from your local development</li>
 <li>Excluding Post-Compile Files - Removes any files that should be excluded, post compilation</li>
 <li>Copying Added Content - Adds in any additional content that is not in the standard locations</li>
 <li>Removing Empty Folders - Purge all empty folders, recursively</li>
 <li>Writng Env.js - Write out the .env.js file with computed any env vars that should be set for the deployed app</li>
 <li>Remove Source Maps - If keep source is false, all source maps are purged from your app's code</li>
 <li>Emptying .ts Files - If keep source is false, all .ts files are emptied, as compilation will not occur at runtime</li></ol>

      <figure class="code">
      <figcaption class="code">Assemble Default Config
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/pack/bin/pack.config.yml#L1">Source</a></cite>
      </figcaption>
      <pre><code class="language-yaml"><span class="token key atrule">assemble</span><span class="token punctuation">:</span>
  <span class="token key atrule">active</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">cacheDir</span><span class="token punctuation">:</span> cache
  <span class="token key atrule">keepSource</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">readonly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">add</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">node_modules/@travetto/cli/bin/travetto.js</span><span class="token punctuation">:</span> node_modules/.bin/trv
    <span class="token punctuation">-</span> <span class="token key atrule">node_modules/@travetto/cli/bin/travetto.js</span><span class="token punctuation">:</span> node_modules/.bin/travetto
    <span class="token punctuation">-</span> <span class="token key atrule">node_modules/lodash/lodash.min.js</span><span class="token punctuation">:</span> node_modules/lodash/lodash.js
  <span class="token key atrule">excludeCompile</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> node_modules/@travetto/<span class="token important">*/alt/</span>
    <span class="token punctuation">-</span> node_modules/@travetto/<span class="token important">*/test/</span>
  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> bower.json
    <span class="token punctuation">-</span> LICENSE
    <span class="token punctuation">-</span> LICENCE
    <span class="token punctuation">-</span> <span class="token string">'*.map'</span>
    <span class="token punctuation">-</span> <span class="token string">'*.md'</span>
    <span class="token punctuation">-</span> <span class="token string">'*.lock'</span>
    <span class="token punctuation">-</span> <span class="token string">'*.html'</span>
    <span class="token punctuation">-</span> <span class="token string">'*.mjs'</span>
    <span class="token punctuation">-</span> <span class="token string">'*.ts'</span>
    <span class="token punctuation">-</span> <span class="token string">'*.d.ts'</span></code></pre>     
      </figure>

      <figure class="terminal">
      <figcaption class="terminal">Assemble Usage
      
      </figcaption>
      <pre><code class="language-bash">$ travetto pack:assemble --help

Usage:  pack:assemble <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>mode<span class="token punctuation">]</span>

Options:
  -w --workspace <span class="token punctuation">[</span>workspace<span class="token punctuation">]</span>  Workspace directory <span class="token punctuation">(</span>default: <span class="token string">"/tmp/pack_travetto_pack"</span><span class="token punctuation">)</span>
  -k --keep-source <span class="token punctuation">[</span>boolean<span class="token punctuation">]</span>  Should <span class="token builtin class-name">source</span> be preserved <span class="token punctuation">(</span>default: <span class="token boolean">true</span><span class="token punctuation">)</span>
  -r --readonly <span class="token punctuation">[</span>boolean<span class="token punctuation">]</span>     Build a <span class="token builtin class-name">readonly</span> deployable <span class="token punctuation">(</span>default: <span class="token boolean">true</span><span class="token punctuation">)</span>
  -h, --help                  display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token builtin class-name">command</span></code></pre>     
      </figure>

<h3 id="cli-pack-zip">CLI - pack:zip</h3>

Zip is an optional step, that can run post assembly.  The only configuration it currently provides is the ability to specify the output location for the zip file.

      <figure class="code">
      <figcaption class="code">Zip Default Config
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/pack/bin/pack.config.yml#L43">Source</a></cite>
      </figcaption>
      <pre><code class="language-yaml"><span class="token key atrule">zip</span><span class="token punctuation">:</span>
  <span class="token key atrule">active</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">output</span><span class="token punctuation">:</span> output.zip</code></pre>     
      </figure>

      <figure class="terminal">
      <figcaption class="terminal">Zip Usage
      
      </figcaption>
      <pre><code class="language-bash">$ travetto pack:zip --help

Usage:  pack:zip <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>mode<span class="token punctuation">]</span>

Options:
  -w --workspace <span class="token punctuation">[</span>workspace<span class="token punctuation">]</span>  Workspace directory <span class="token punctuation">(</span>default: <span class="token string">"/tmp/pack_travetto_pack"</span><span class="token punctuation">)</span>
  -o --output <span class="token punctuation">[</span>output<span class="token punctuation">]</span>        Output File <span class="token punctuation">(</span>default: <span class="token string">"output.zip"</span><span class="token punctuation">)</span>
  -h, --help                  display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token builtin class-name">command</span></code></pre>     
      </figure>

<h3 id="modes">Modes</h3>
Various modules may provide customizations to the default <code class="item path">pack.config.yml</code> to allow for easy integration with the packing process.  A simple example of this is via the <a class="module-link" href="/docs/rest" title="Declarative api for RESTful APIs with support for the dependency injection module.">RESTful API</a> module, for how to publish lambda packages.

      <figure class="code">
      <figcaption class="code">Rest, pack.lambda.yml
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/rest/support/pack.lambda.yml">Source</a></cite>
      </figcaption>
      <pre><code class="language-yaml"><span class="token key atrule">assemble</span><span class="token punctuation">:</span>
  <span class="token key atrule">active</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">keepSource</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">add</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">node_modules/@travetto/rest/support/aws-lambda.js</span><span class="token punctuation">:</span> index.js
  <span class="token key atrule">env</span><span class="token punctuation">:</span>
    <span class="token key atrule">NO_COLOR</span><span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">zip</span><span class="token punctuation">:</span>
  <span class="token key atrule">active</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">output</span><span class="token punctuation">:</span> dist/lambda.zip</code></pre>     
      </figure>

      <figure class="terminal">
      <figcaption class="terminal">Invoking Pack with Mode
      
      </figcaption>
      <pre><code class="language-bash">npx travetto pack <span class="token operator">&lt;</span>mode<span class="token operator">></span></code></pre>     
      </figure>

<h3 id="configuration">Configuration</h3>
By default the following paths are searched for configuration (in the following order):

<ol> <li>@travetto/pack/bin/pack.config.yml</li>
 <li><code class="item input">&lt;mode&gt;</code> related pack.*.yml</li>
 <li>pack.config.ya?ml</li></ol>

Given the ordering, its clear to see that a project can define it's own configuration at the root of the project with <code class="item path">pack.config.yml</code>. Any defaults can be overidden.

      <figure class="code">
      <figcaption class="code">Example pack.config.yml
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/master/module/pack/alt/docs/pack.config.yml">Source</a></cite>
      </figcaption>
      <pre><code class="language-yaml"><span class="token key atrule">workspace</span><span class="token punctuation">:</span> dist/alt
<span class="token key atrule">assemble</span><span class="token punctuation">:</span>
  <span class="token key atrule">active</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">add</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">assets</span><span class="token punctuation">:</span> assets
    <span class="token punctuation">-</span> <span class="token key atrule">/secret/location/key.pem</span><span class="token punctuation">:</span> resources/key.pem
<span class="token key atrule">zip</span><span class="token punctuation">:</span>
  <span class="token key atrule">active</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">output</span><span class="token punctuation">:</span> dist/build.zip</code></pre>     
      </figure>

</div>