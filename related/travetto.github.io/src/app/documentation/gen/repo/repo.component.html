<!-- This file was generated by @travetto/doc and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/main/module/repo/DOC.tsx and execute "npx trv doc" to rebuild -->
<h1>Repo
<small>Monorepo utilities</small>
</h1>

  <figure class="install">
    <figcaption class="install">Install @travetto/repo
    
    </figcaption>
    <pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @travetto/repo

<span class="token comment"># or</span>

<span class="token function">yarn</span> <span class="token function">add</span> @travetto/repo</code></pre>
  </figure>

The repo module aims to provide some simple mono-repo based tools, primarily around module publishing.  The module provides two cli operations:
<h2 id="cli-version">CLI - Version</h2>

The versioning operation will find all the changed modules (and the modules that depend on the changed), and will update the versions in accordance with the user preferences.  The versioning logic is backed by <a target="_blank" class="external-link" href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm">Npm</a>'s and <a target="_blank" class="external-link" href="https://yarnpg.com">Yarn</a>'s versioning functionality and so it is identical to using the tool manually. The determination of what has or hasn't changed is relative to the last versioning commit.

  <figure class="terminal">
    <figcaption class="terminal">Version execution

</figcaption>
    <pre><code class="language-bash">$ trv repo:version

Please specify a level to <span class="token builtin class-name">continue</span>

Usage: trv repo:version <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token operator">&lt;</span>level<span class="token operator">></span> <span class="token punctuation">[</span>prefix<span class="token punctuation">]</span>

Options:
  -c, --no-changed  Disables: Only version changed modules
  -f, <span class="token parameter variable">--force</span>       Force operation, even <span class="token keyword">in</span> a dirty workspace
  -h, <span class="token parameter variable">--help</span>        display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token builtin class-name">command</span></code></pre>
  </figure>

Level is a standard semver level of: major, minor, patch or prerelease.  The prefix argument only applies to the prerelease and allows for determining the prerelease level.  For example:

  <figure class="terminal">
    <figcaption class="terminal">Cutting a release candidate

</figcaption>
    <pre><code class="language-bash">npx trv repo:version prerelease rc</code></pre>
  </figure>

After a release is cut, a new commit will be created that marks the next stable point in the commit history.

  <figure class="code">
    <figcaption class="code">Versioning Commit

</figcaption>
    <pre><code class="language-bash">commit e9dc1a1de9625ab47398997fee6a95dd5a426900
Author: Travetto Framework <span class="token operator">&lt;</span>travetto.framework@gmail.com<span class="token operator">></span>
Date:   Thu Feb <span class="token number">23</span> <span class="token number">17</span>:51:37 <span class="token number">2023</span> <span class="token parameter variable">-0500</span>
Date:   Thu Feb <span class="token number">23</span> <span class="token number">17</span>:51:37 <span class="token number">2023</span> <span class="token parameter variable">-0500</span>

    Publish @travetto/app,@travetto/asset,@travetto/asset-rest,@travetto/auth,@travetto/auth-model,@travetto/auth-rest,@travetto/auth-rest-context,@travetto/auth-rest-jwt,@travetto/auth-rest-passport,@travetto/auth-rest-session,<span class="token punctuation">..</span>.</code></pre>
  </figure>

<h2 id="cli-publish">CLI - Publish</h2>

The publish functionality is relatively naive, but consistent.  The code will look at all modules in the mono-repo and check the listed version against what is available in the npm registry.  If the local version is newer, it is a candidate for publishing.

  <figure class="terminal">
    <figcaption class="terminal">Publish execution

</figcaption>
    <pre><code class="language-bash">$ trv repo:publish <span class="token parameter variable">-h</span>

Usage:  repo:publish <span class="token punctuation">[</span>options<span class="token punctuation">]</span>

Options:
  -d, --no-dry-run  Disables: Dry Run?
  -h, <span class="token parameter variable">--help</span>        display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token builtin class-name">command</span></code></pre>
  </figure>

By default the tool will execute a dry run only, and requires passing a flag to disable the dry run.

  <figure class="terminal">
    <figcaption class="terminal">Publishing changes

</figcaption>
    <pre><code class="language-bash">npx trv repo:publish <span class="token parameter variable">-d</span></code></pre>
  </figure>

If no modules are currently changed, then the command will indicate there is no work to do, and exit gracefully.
