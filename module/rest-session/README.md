<!-- This file was generated by @travetto/doc and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/main/module/rest-session/doc.ts and execute "npx trv doc" to rebuild -->
# REST Session
## Session provider for the travetto rest module.

**Install: @travetto/rest-session**
```bash
npm install @travetto/rest-session
```

This is a module that adds session support to the [RESTful API](https://github.com/travetto/travetto/tree/main/module/rest#readme "Declarative api for RESTful APIs with support for the dependency injection module.") framework.  Sessions are represented as:

**Code: Session Structure**
```typescript
export class Session<T extends SessionData = SessionData>  {
  /**
   * The expiry time when the session was loaded
   */
  /**
   * The hash of the session at load
   */
  /**
   * The session identifer
   */
  readonly id: string;
  /**
   * Session max age in ms
   */
  readonly maxAge?: number;
  /**
   * Session signature
   */
  readonly signature?: string;
  /**
   * Session initial issue timestamp
   */
  readonly issuedAt: Date;
  /**
   * Expires at time
   */
  expiresAt: Date | undefined;
  /**
   * What action should be taken against the session
   */
  action?: 'create' | 'destroy' | 'modify';
  /**
   * The session data
   */
  data: T | undefined;
  /**
   * Create a new Session object given a partial version of itself
   */
  constructor(data: Partial<Session>) ;
  /**
   * Get session value
   */
  getValue<V>(key: string): V | undefined ;
  /**
   * Set session value
   */
  setValue<V>(key: string, value: V): void ;
  /**
   * Determine if session has changed
   */
  isChanged() ;
  /**
   * Determine if the expiry time has changed
   */
  isTimeChanged() ;
  /**
   * See if the session is nearly expired
   */
  isAlmostExpired() ;
  /**
   * See if the session is truly expired
   */
  isExpired() ;
  /**
   * Refresh the session expiration time
   */
  refresh() ;
  /**
   * Mark the session for destruction, delete the data
   */
  destroy() ;
  /**
   * Serialize the session
   */
  toJSON() ;
}
```

A session allows for defining the expiration time, what state the session should be in, as well as the payload (session data).  The session and session data are accessible via the [@Context](https://github.com/travetto/travetto/tree/main/module/rest/src/decorator/param.ts#L38) parameter as [Session](https://github.com/travetto/travetto/tree/main/module/rest-session/src/session.ts#L18) and [SessionData](https://github.com/travetto/travetto/tree/main/module/rest-session/src/session.ts#L8) respectively.  Iit can also be accessed via the [TravettoRequest](https://github.com/travetto/travetto/tree/main/module/rest-session/src/types.d.ts#L7) as a session property.

**Code: Sample Session Usage**
```typescript
import { Controller, Put, Get } from '@travetto/rest';
import { SessionData, Session } from '@travetto/rest-session';

@Controller('/session')
export class SessionRoutes {

  @Put('/info')
  async storeInfo(data: SessionData) {
    data.age = 20;
    data.name = 'Roger'; // Setting data
  }

  @Get('/logout')
  async logout(session: Session) {
    await session.destroy();
  }

  @Get('/info/age')
  async getInfo(data: SessionData) {
    return data.age;
  }
}
```

This usage should be comparable to [express](https://expressjs.com), [koa](https://koajs.com/) and mostly every other framework.

## Configuration

Session mechanics are defined by the underlying provider.
