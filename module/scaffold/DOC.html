<!-- This file was generated by @travetto/doc and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/main/module/scaffold/DOC.ts and execute "npx trv doc" to rebuild -->
<h1>App Scaffold
          <small>App Scaffold for the Travetto framework</small>

        </h1>

      <figure class="install">
      <figcaption class="install">Install @travetto/scaffold
      
      </figcaption>
      <pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @travetto/scaffold</code></pre>     
      </figure>

A simple tool for scaffolding a reference project.  To get started, you need to make sure:

      <figure class="install">
      <figcaption class="install">Setting up the necessary config
      
      </figcaption>
      <pre><code class="language-bash">$ <span class="token function">git</span> config <span class="token parameter variable">--global.username</span> <span class="token operator">&lt;</span>Username<span class="token operator">></span> <span class="token comment">#Set your git username</span></code></pre>     
      </figure>

Once installed you can invoke the scaffolding by running

      <figure class="terminal">
      <figcaption class="terminal">Running Generator
      
      </figcaption>
      <pre><code class="language-bash">$ npx @travetto/scaffold</code></pre>     
      </figure>

The generator will ask about enabling the following features:

<h2 id="restful-architecture">Restful Architecture</h2>
The <a class="module-link" href="https://github.com/travetto/travetto/tree/main/module/rest" title="Declarative api for RESTful APIs with support for the dependency injection module.">RESTful API</a> provides the necessary integration for exposing restful apis.  When selecting the <code class="item input">rest</code> feature, you will need to specify which backend you want to include with your application, the default being <a target="_blank" class="external-link" href="https://expressjs.com">express</a>.  Currently you can select from:

<ul> <li><a target="_blank" class="external-link" href="https://expressjs.com">express</a></li>
 <li><a target="_blank" class="external-link" href="https://koajs.com/">koa</a></li>
 <li><a target="_blank" class="external-link" href="https://www.fastify.io/">fastify</a></li></ul>

The code will establish some basic routes, specifically, <code class="item input">GET /</code> as the root endpoint.  This will return the contents of your <code class="item path">package.json</code> as an identification operation.

<h3 id="additional-rest-features">Additional Rest Features</h3>
In addition to the core functionality, the <code class="item input">rest</code> feature has some useful sub-features.  Specifically:

<a class="module-link" href="https://github.com/travetto/travetto/tree/main/module/openapi" title="OpenAPI integration support for the travetto framework">OpenAPI Specification</a> support for the restful api.  This will automatically expose a <code class="item path">openapi.yml</code> endpoint, and provide the necessary plumbing to support client generation.

<a class="module-link" href="https://github.com/travetto/travetto/tree/main/module/log" title="Logging framework that integrates at the console.log level.">Logging</a> support for better formatting, <a target="_blank" class="external-link" href="https://www.npmjs.com/package/debug">debug</a> like support, and colorized output.  This is generally useful for server logs, especially during development.

<h2 id="authentication">Authentication</h2>
Authentication is also supported on the Restful endpoints by selecting <a class="module-link" href="https://github.com/travetto/travetto/tree/main/module/auth-rest" title="Rest authentication integration support for the travetto framework">Rest Auth</a> during setup.  This will support basic authentication running out of local memory, with user <a class="module-link" href="https://github.com/travetto/travetto/tree/main/module/rest-session" title="Session provider for the travetto rest module.">REST Session</a>s.

<h2 id="testing">Testing</h2>
<a class="module-link" href="https://github.com/travetto/travetto/tree/main/module/test" title="Declarative test framework">Testing</a> can also be configured out of the box to provide simple test cases for the data model.

<h2 id="data-modelling-and-storage">Data Modelling and Storage</h2>

The <a class="module-link" href="https://github.com/travetto/travetto/tree/main/module/model" title="Datastore abstraction for core operations.">Data Modeling Support</a> allows for modeling of application data, and provides mechanisms for storage and retrieval.  When setting up your application, you will need to select which database backend you want to use:

<ul> <li><a target="_blank" class="external-link" href="https://elastic.co">elasticsearch</a></li>
 <li><a target="_blank" class="external-link" href="https://mongodb.com">mongodb</a></li>
 <li><a target="_blank" class="external-link" href="https://en.wikipedia.org/wiki/SQL">SQL</a></li>
 <li><a target="_blank" class="external-link" href="https://aws.amazon.com/dynamodb/">DynamoDB</a></li>
 <li><a target="_blank" class="external-link" href="https://firebase.google.com/docs/firestore">Firestore</a></li></ul>

A default model is constructed, a <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/main/module/scaffold/doc/model.ts#L4">Todo</a> class:

      <figure class="code">
      <figcaption class="code">Todo Model
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/scaffold/doc/model.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Model<span class="token punctuation">,</span> ModelType <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/model'</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Model</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Todo</span> <span class="token keyword">implements</span> <span class="token class-name">ModelType</span> <span class="token punctuation">{{'{'}}</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  completed<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

Basic tests are also included for the <code class="item input">model</code> to verify that database interaction and functionality is working properly.

<h2 id="rest-model">Rest + Model</h2>
In the case both <code class="item input">rest</code> and <code class="item input">model</code> features are enabled, the code will produce a controller that exposes the <a target="_blank" class="source-link" href="https://github.com/travetto/travetto/tree/main/module/scaffold/doc/model.ts#L4">Todo</a> model via restful patterns.

      <figure class="code">
      <figcaption class="code">Todo controller
      <cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/scaffold/doc/rest.ts">Source</a></cite>
      </figcaption>
      <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Controller<span class="token punctuation">,</span> Get<span class="token punctuation">,</span> Put<span class="token punctuation">,</span> Post<span class="token punctuation">,</span> Delete <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/rest'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> NotFoundError <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/model'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Inject <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/di'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> ModelQuery<span class="token punctuation">,</span> ModelQueryCrudSupport <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/model-query'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Schema <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/schema'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Todo <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'./model'</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Schema</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Query</span> <span class="token punctuation">{{'{'}}</span>
  q<span class="token operator">:</span> object <span class="token operator">=</span> <span class="token punctuation">{{'{'}}</span><span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
<span class="token punctuation">{{'}'}}</span>

<span class="token comment">/**
 * Controller for managing all aspects of the Todo lifecycle
 */</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Controller</span></span><span class="token punctuation">(</span><span class="token string">'/todo'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">TodoController</span> <span class="token punctuation">{{'{'}}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Inject</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  source<span class="token operator">:</span> ModelQueryCrudSupport<span class="token punctuation">;</span>

  <span class="token comment">/**
   * Get all Todos
   */</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Get</span></span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">getAll</span><span class="token punctuation">(</span>query<span class="token operator">:</span> Query<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Todo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token punctuation">{{'{'}}</span>
    query<span class="token punctuation">.</span>q <span class="token operator">??=</span> <span class="token punctuation">{{'{'}}</span><span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>Todo<span class="token punctuation">,</span> <span class="token punctuation">{{'{'}}</span> where<span class="token operator">:</span> query<span class="token punctuation">.</span>q <span class="token punctuation">{{'}'}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>

  <span class="token comment">/**
   * Get Todo by id
   */</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Get</span></span><span class="token punctuation">(</span><span class="token string">'/:id'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">getOne</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Todo<span class="token operator">></span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">const</span> q<span class="token operator">:</span> ModelQuery<span class="token operator">&lt;</span>Todo<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{{'{'}}</span> where<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span> id <span class="token punctuation">{{'}'}}</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> q<span class="token punctuation">.</span>where <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token punctuation">{{'}'}}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">queryOne</span><span class="token punctuation">(</span>Todo<span class="token punctuation">,</span> q<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>

  <span class="token comment">/**
   * Create a Todo
   */</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Post</span></span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">save</span><span class="token punctuation">(</span>todo<span class="token operator">:</span> Todo<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Todo<span class="token operator">></span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Todo<span class="token punctuation">,</span> todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>

  <span class="token comment">/**
   * Update a Todo
   */</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Put</span></span><span class="token punctuation">(</span><span class="token string">'/:id'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">update</span><span class="token punctuation">(</span>todo<span class="token operator">:</span> Todo<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Todo<span class="token operator">></span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>Todo<span class="token punctuation">,</span> todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>

  <span class="token comment">/**
   * Delete a Todo
   */</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Delete</span></span><span class="token punctuation">(</span><span class="token string">'/:id'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">remove</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">const</span> q<span class="token operator">:</span> ModelQuery<span class="token operator">&lt;</span>Todo<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{{'{'}}</span> where<span class="token operator">:</span> <span class="token punctuation">{{'{'}}</span> id <span class="token punctuation">{{'}'}}</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> q<span class="token punctuation">.</span>where <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token punctuation">{{'}'}}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">deleteByQuery</span><span class="token punctuation">(</span>Todo<span class="token punctuation">,</span> q<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NotFoundError</span><span class="token punctuation">(</span>Todo<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>     
      </figure>

<h2 id="running">Running</h2>

Once finished the application will reflect the modules chosen, and will be ready for execution, if you have configured a runnable application.  Currently, this requires the <code class="item input">rest</code> feature to be selected.

      <figure class="terminal">
      <figcaption class="terminal">Starting the App
      
      </figcaption>
      <pre><code class="language-bash"><span class="token function">npm</span> start</code></pre>     
      </figure>
