<!-- This file was generated by @travetto/doc and should not be modified directly -->
<!-- Please modify https://github.com/travetto/travetto/tree/main/module/rest-upload/DOC.tsx and execute "npx trv doc" to rebuild -->
<h1>Rest Upload Support
<small>Provides integration between the travetto asset and rest module.</small>
</h1>

  <figure class="install">
    <figcaption class="install">Install @travetto/rest-upload
    
    </figcaption>
    <pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @travetto/rest-upload

<span class="token comment"># or</span>

<span class="token function">yarn</span> <span class="token function">add</span> @travetto/rest-upload</code></pre>
  </figure>

This module provides a clean and direct mechanism for processing uploads, built upon <a target="_blank" class="external-link" href="https://github.com/fastify/busboy">@fastify/busboy</a>. The module also provides some best practices with respect to temporary file deletion.<br><br>
Once the files are uploaded, they are exposed on <a class="module-link" href="https://github.com/travetto/travetto/tree/main/module/rest" title="Declarative api for RESTful APIs with support for the dependency injection module.">RESTful API</a>'s request object as <code class="item field">req.files</code>. The uploaded files are constructed as <code class="item input">File</code> instances.<br><br>
A simple example:

  <figure class="code">
    <figcaption class="code">Rest controller with upload support
<cite><a target="_blank" href="https://github.com/travetto/travetto/tree/main/module/rest-upload/doc/simple-controller.ts">Source</a></cite>

</figcaption>
    <pre><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Controller<span class="token punctuation">,</span> Post<span class="token punctuation">,</span> Get<span class="token punctuation">,</span> Request <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/rest'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{{'{'}}</span> Upload<span class="token punctuation">,</span> UploadAll <span class="token punctuation">{{'}'}}</span> <span class="token keyword">from</span> <span class="token string">'@travetto/rest-upload'</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Controller</span></span><span class="token punctuation">(</span><span class="token string">'/simple'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Simple</span> <span class="token punctuation">{{'{'}}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Get</span></span><span class="token punctuation">(</span><span class="token string">'/age'</span><span class="token punctuation">)</span>
  <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{{'{'}}</span> age<span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Post</span></span><span class="token punctuation">(</span><span class="token string">'/age'</span><span class="token punctuation">)</span>
  <span class="token function">getPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{{'{'}}</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">{{'}'}}</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>

  <span class="token comment">/**
   * @param file A file to upload
   */</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Post</span></span><span class="token punctuation">(</span><span class="token string">'/file'</span><span class="token punctuation">)</span>
  <span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Upload</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> file<span class="token operator">:</span> File<span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">return</span> file<span class="token punctuation">;</span>
  <span class="token punctuation">{{'}'}}</span>

  <span class="token comment">/**
   * @param file A file to upload
   */</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Post</span></span><span class="token punctuation">(</span><span class="token string">'/files'</span><span class="token punctuation">)</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">UploadAll</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">loadFiles</span><span class="token punctuation">(</span><span class="token punctuation">{{'{'}}</span> files <span class="token punctuation">{{'}'}}</span><span class="token operator">:</span> Request<span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> file<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{{'{'}}</span>
      <span class="token keyword">return</span> file<span class="token punctuation">;</span>
    <span class="token punctuation">{{'}'}}</span>
  <span class="token punctuation">{{'}'}}</span>
<span class="token punctuation">{{'}'}}</span></code></pre>
  </figure>
